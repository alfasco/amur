
import{ApplicationRef}from'@angular/core';import{getDOM}from'../../dom/dom_adapter';import{window}from'../../facade/browser';import{NumberWrapper,isPresent}from'../../facade/lang';export var ChangeDetectionPerfRecord=(function(){function ChangeDetectionPerfRecord(msPerTick,numTicks){this.msPerTick=msPerTick;this.numTicks=numTicks;}
return ChangeDetectionPerfRecord;}());export var AngularTools=(function(){function AngularTools(ref){this.profiler=new AngularProfiler(ref);}
return AngularTools;}());export var AngularProfiler=(function(){function AngularProfiler(ref){this.appRef=ref.injector.get(ApplicationRef);}
AngularProfiler.prototype.timeChangeDetection=function(config){var record=isPresent(config)&&config['record'];var profileName='Change Detection';var isProfilerAvailable=isPresent(window.console.profile);if(record&&isProfilerAvailable){window.console.profile(profileName);}
var start=getDOM().performanceNow();var numTicks=0;while(numTicks<5||(getDOM().performanceNow()-start)<500){this.appRef.tick();numTicks++;}
var end=getDOM().performanceNow();if(record&&isProfilerAvailable){window.console.profileEnd(profileName);}
var msPerTick=(end-start)/numTicks;window.console.log("ran "+numTicks+" change detection cycles");window.console.log(NumberWrapper.toFixed(msPerTick,2)+" ms per check");return new ChangeDetectionPerfRecord(msPerTick,numTicks);};return AngularProfiler;}());