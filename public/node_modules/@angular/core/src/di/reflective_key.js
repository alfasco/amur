
import{isBlank,stringify}from'../facade/lang';import{resolveForwardRef}from'./forward_ref';export var ReflectiveKey=(function(){function ReflectiveKey(token,id){this.token=token;this.id=id;if(isBlank(token)){throw new Error('Token must be defined!');}}
Object.defineProperty(ReflectiveKey.prototype,"displayName",{get:function(){return stringify(this.token);},enumerable:true,configurable:true});ReflectiveKey.get=function(token){return _globalKeyRegistry.get(resolveForwardRef(token));};Object.defineProperty(ReflectiveKey,"numberOfKeys",{get:function(){return _globalKeyRegistry.numberOfKeys;},enumerable:true,configurable:true});return ReflectiveKey;}());export var KeyRegistry=(function(){function KeyRegistry(){this._allKeys=new Map();}
KeyRegistry.prototype.get=function(token){if(token instanceof ReflectiveKey)
return token;if(this._allKeys.has(token)){return this._allKeys.get(token);}
var newKey=new ReflectiveKey(token,ReflectiveKey.numberOfKeys);this._allKeys.set(token,newKey);return newKey;};Object.defineProperty(KeyRegistry.prototype,"numberOfKeys",{get:function(){return this._allKeys.size;},enumerable:true,configurable:true});return KeyRegistry;}());var _globalKeyRegistry=new KeyRegistry();