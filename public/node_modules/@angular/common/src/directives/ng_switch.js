
import{Directive,Host,Input,TemplateRef,ViewContainerRef}from'@angular/core';import{ListWrapper}from'../facade/collection';import{isBlank,isPresent,normalizeBlank}from'../facade/lang';var _CASE_DEFAULT=new Object();export var SwitchView=(function(){function SwitchView(_viewContainerRef,_templateRef){this._viewContainerRef=_viewContainerRef;this._templateRef=_templateRef;}
SwitchView.prototype.create=function(){this._viewContainerRef.createEmbeddedView(this._templateRef);};SwitchView.prototype.destroy=function(){this._viewContainerRef.clear();};return SwitchView;}());export var NgSwitch=(function(){function NgSwitch(){this._useDefault=false;this._valueViews=new Map();this._activeViews=[];}
Object.defineProperty(NgSwitch.prototype,"ngSwitch",{set:function(value){this._emptyAllActiveViews();this._useDefault=false;var views=this._valueViews.get(value);if(isBlank(views)){this._useDefault=true;views=normalizeBlank(this._valueViews.get(_CASE_DEFAULT));}
this._activateViews(views);this._switchValue=value;},enumerable:true,configurable:true});NgSwitch.prototype._onCaseValueChanged=function(oldCase,newCase,view){this._deregisterView(oldCase,view);this._registerView(newCase,view);if(oldCase===this._switchValue){view.destroy();ListWrapper.remove(this._activeViews,view);}
else if(newCase===this._switchValue){if(this._useDefault){this._useDefault=false;this._emptyAllActiveViews();}
view.create();this._activeViews.push(view);}
if(this._activeViews.length===0&&!this._useDefault){this._useDefault=true;this._activateViews(this._valueViews.get(_CASE_DEFAULT));}};NgSwitch.prototype._emptyAllActiveViews=function(){var activeContainers=this._activeViews;for(var i=0;i<activeContainers.length;i++){activeContainers[i].destroy();}
this._activeViews=[];};NgSwitch.prototype._activateViews=function(views){if(isPresent(views)){for(var i=0;i<views.length;i++){views[i].create();}
this._activeViews=views;}};NgSwitch.prototype._registerView=function(value,view){var views=this._valueViews.get(value);if(isBlank(views)){views=[];this._valueViews.set(value,views);}
views.push(view);};NgSwitch.prototype._deregisterView=function(value,view){if(value===_CASE_DEFAULT)
return;var views=this._valueViews.get(value);if(views.length==1){this._valueViews.delete(value);}
else{ListWrapper.remove(views,view);}};NgSwitch.decorators=[{type:Directive,args:[{selector:'[ngSwitch]'},]},];NgSwitch.ctorParameters=[];NgSwitch.propDecorators={'ngSwitch':[{type:Input},],};return NgSwitch;}());export var NgSwitchCase=(function(){function NgSwitchCase(viewContainer,templateRef,ngSwitch){this._value=_CASE_DEFAULT;this._switch=ngSwitch;this._view=new SwitchView(viewContainer,templateRef);}
Object.defineProperty(NgSwitchCase.prototype,"ngSwitchCase",{set:function(value){this._switch._onCaseValueChanged(this._value,value,this._view);this._value=value;},enumerable:true,configurable:true});NgSwitchCase.decorators=[{type:Directive,args:[{selector:'[ngSwitchCase]'},]},];NgSwitchCase.ctorParameters=[{type:ViewContainerRef,},{type:TemplateRef,},{type:NgSwitch,decorators:[{type:Host},]},];NgSwitchCase.propDecorators={'ngSwitchCase':[{type:Input},],};return NgSwitchCase;}());export var NgSwitchDefault=(function(){function NgSwitchDefault(viewContainer,templateRef,sswitch){sswitch._registerView(_CASE_DEFAULT,new SwitchView(viewContainer,templateRef));}
NgSwitchDefault.decorators=[{type:Directive,args:[{selector:'[ngSwitchDefault]'},]},];NgSwitchDefault.ctorParameters=[{type:ViewContainerRef,},{type:TemplateRef,},{type:NgSwitch,decorators:[{type:Host},]},];return NgSwitchDefault;}());